{"version":3,"file":"static/js/952.c01a84bd.chunk.js","mappings":"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","sources":["../../common/audio-clip/mp3-encoder-worker.ts","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import { WavHeader, Mp3Encoder } from 'lamejs';\nimport { SerializableAudioBuffer } from './mp3-encoder';\n\nconst samplesPerFrame = 1152;\nconst bitRate = 192;\n\n// https://stackoverflow.com/questions/61264581/how-to-convert-audio-buffer-to-mp3-in-javascript\nclass Wav {\n    header: any;\n    samples: Int16Array;\n\n    constructor(audioBuffer: SerializableAudioBuffer) {\n        const length = audioBuffer.length * audioBuffer.numberOfChannels * 2 + 44;\n        const view = new View(new DataView(new ArrayBuffer(length)));\n        view.setUint32(0x46464952); // \"RIFF\"\n        view.setUint32(length - 8); // file length - 8\n        view.setUint32(0x45564157); // \"WAVE\"\n        view.setUint32(0x20746d66); // \"fmt \" chunk\n        view.setUint32(16); // length = 16\n        view.setUint16(1); // PCM (uncompressed)\n        view.setUint16(audioBuffer.numberOfChannels);\n        view.setUint32(audioBuffer.sampleRate);\n        view.setUint32(audioBuffer.sampleRate * 2 * audioBuffer.numberOfChannels); // avg. bytes/sec\n        view.setUint16(audioBuffer.numberOfChannels * 2); // block-align\n        view.setUint16(16); // 16-bit\n        view.setUint32(0x61746164); // \"data\" - chunk\n        view.setUint32(length - view.position - 4); // chunk length\n\n        const channels = audioBuffer.channels;\n\n        let offset = 0;\n\n        while (view.position < length) {\n            for (let i = 0; i < audioBuffer.numberOfChannels; ++i) {\n                let sample = Math.max(-1, Math.min(1, channels[i][offset])); // clamp\n                sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0; // scale to 16-bit signed int\n                view.setInt16(sample); // write 16-bit sample\n            }\n\n            ++offset; // next source sample\n        }\n\n        this.header = WavHeader.readHeader(view.dataView);\n        this.samples = new Int16Array(view.dataView.buffer, this.header.dataOffset, this.header.dataLen / 2);\n    }\n}\n\nclass View {\n    dataView: DataView;\n    position: number;\n\n    constructor(dataView: DataView) {\n        this.dataView = dataView;\n        this.position = 0;\n    }\n\n    setUint16(data: number) {\n        this.dataView.setUint16(this.position, data, true);\n        this.position += 2;\n    }\n\n    setUint32(data: number) {\n        this.dataView.setUint32(this.position, data, true);\n        this.position += 4;\n    }\n\n    setInt16(data: number) {\n        this.dataView.setInt16(this.position, data, true);\n        this.position += 2;\n    }\n}\n\nasync function encode(audioBuffer: SerializableAudioBuffer) {\n    const wav = new Wav(audioBuffer);\n    const channels = wav.header.channels;\n    const sampleRate = wav.header.sampleRate;\n    const samples = wav.samples;\n\n    let left;\n    let right = null;\n\n    if (channels === 1) {\n        left = new Int16Array(samples);\n    } else if (channels === 2) {\n        let leftSamples = [];\n        let rightSamples = [];\n\n        for (let i = 0; i < samples.length; i += 2) {\n            leftSamples.push(samples[i]);\n            rightSamples.push(samples[i + 1]);\n        }\n\n        left = new Int16Array(leftSamples);\n        right = new Int16Array(rightSamples);\n    } else {\n        throw new Error('Unsupport number of channels ' + channels);\n    }\n\n    const buffer = [];\n    const encoder = new Mp3Encoder(channels, sampleRate, bitRate);\n    let remaining = samples.length;\n\n    for (var i = 0; remaining >= samplesPerFrame; i += samplesPerFrame) {\n        const rightSubArray = right === null ? null : right.subarray(i, i + samplesPerFrame);\n        var mp3Buff = encoder.encodeBuffer(left.subarray(i, i + samplesPerFrame), rightSubArray);\n\n        if (mp3Buff.length > 0) {\n            buffer.push(new Int8Array(mp3Buff));\n        }\n\n        remaining -= samplesPerFrame;\n    }\n\n    const data = encoder.flush();\n\n    if (data.length > 0) {\n        buffer.push(new Int8Array(data));\n    }\n\n    return buffer;\n}\n\nonmessage = async (e) => {\n    postMessage({\n        command: 'finished',\n        buffer: await encode(e.data.audioBuffer),\n    });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [583], () => (__webpack_require__(7952)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"9c155296\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"/asbplayer/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t952: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunk_project_client\"] = self[\"webpackChunk_project_client\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(583).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["samplesPerFrame","bitRate","Wav","audioBuffer","header","samples","length","numberOfChannels","view","View","DataView","ArrayBuffer","setUint32","setUint16","sampleRate","position","channels","offset","i","sample","Math","max","min","setInt16","this","WavHeader","readHeader","dataView","Int16Array","buffer","dataOffset","dataLen","data","encode","wav","right","left","leftSamples","rightSamples","push","Error","encoder","Mp3Encoder","remaining","rightSubArray","subarray","mp3Buff","encodeBuffer","Int8Array","flush","onmessage","e","postMessage","command","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}